# 实现任务清单

## 1. 准备工作

- [ ] 1.1 阅读 proposal.md 了解变更范围
- [ ] 1.2 阅读 design.md (如存在) 了解技术决策
- [ ] 1.3 创建 feature 分支
- [ ] 1.4 设置开发环境
- [ ] 1.5 验证现有测试通过

## 2. Rust 代码实现

- [ ] 2.1 添加必要的依赖到 `Cargo.toml`
- [ ] 2.2 实现核心数据结构
- [ ] 2.3 实现核心逻辑
- [ ] 2.4 添加/更新 JNI 绑定
- [ ] 2.5 编写单元测试
- [ ] 2.6 运行 `cargo test` 验证
- [ ] 2.7 运行 `cargo clippy` 检查代码质量
- [ ] 2.8 运行 `cargo fmt` 格式化代码

## 3. Java 代码实现

- [ ] 3.1 更新 Gradle 依赖 (如需要)
- [ ] 3.2 实现 Java 端核心逻辑
- [ ] 3.3 实现 JNI 调用封装
- [ ] 3.4 添加/更新 Minecraft 集成
- [ ] 3.5 编写单元测试
- [ ] 3.6 运行 Gradle 测试
- [ ] 3.7 验证 Fabric 和 Forge 兼容性

## 4. 跨语言集成

- [ ] 4.1 测试 JNI 边界数据传输
- [ ] 4.2 验证 Rust 和 Java 数据格式一致
- [ ] 4.3 测试内存管理 (无泄漏)
- [ ] 4.4 性能测试 (确保满足 60FPS 目标)

## 5. 资源文件 (如适用)

- [ ] 5.1 添加/更新着色器文件
- [ ] 5.2 添加/更新纹理资源
- [ ] 5.3 添加/更新配置文件
- [ ] 5.4 验证资源路径正确

## 6. 文档更新

- [ ] 6.1 更新 `openspec/specs/` 中的相关规范
- [ ] 6.2 更新代码注释
- [ ] 6.3 更新 README.md (如需要)
- [ ] 6.4 更新 CHANGELOG.md (如需要)

## 7. 测试与验证

- [ ] 7.1 运行 Rust 单元测试
- [ ] 7.2 运行 Java 单元测试
- [ ] 7.3 在开发环境进行集成测试
- [ ] 7.4 在实际 Minecraft 客户端测试
- [ ] 7.5 性能测试 (使用 Criterion/JMH)
- [ ] 7.6 边缘情况测试
- [ ] 7.7 回归测试 (确保未破坏现有功能)

## 8. 代码审查准备

- [ ] 8.1 运行 `cargo test --all-features`
- [ ] 8.2 运行 `./gradlew build`
- [ ] 8.3 运行 `openspec validate [change-id] --strict`
- [ ] 8.4 确保所有检查通过
- [ ] 8.5 创建 Pull Request
- [ ] 8.6 在 PR 描述中关联 OpenSpec 提案

## 9. 合并后

- [ ] 9.1 监控 CI/CD 检查
- [ ] 9.2 回顾审查反馈
- [ ] 9.3 应用修改
- [ ] 9.4 确认合并

## 10. 归档提案

- [ ] 10.1 运行 `openspec archive [change-id]`
- [ ] 10.2 验证 `openspec/specs/` 中的规范已更新
- [ ] 10.3 运行 `openspec validate --strict`
- [ ] 10.4 创建归档 PR (如需要)

## 注意事项

### 性能检查点
- [ ] JNI 调用频率是否合理?
- [ ] 物理模拟是否在 5ms 内完成?
- [ ] 渲染是否保持 60 FPS?

### 跨平台兼容性
- [ ] Fabric 加载器是否正常?
- [ ] Forge 加载器是否正常?
- [ ] Windows/Linux/macOS 是否都支持?

### 内存安全
- [ ] Rust 端是否正确管理内存?
- [ ] Java 端是否正确释放 native 资源?
- [ ] 是否存在内存泄漏 (使用 Valgrind/VisualVM 验证)?
