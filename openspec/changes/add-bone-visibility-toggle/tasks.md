# 实现任务清单

## 1. Rust 代码实现

- [ ] 1.1 在 `Bone` 结构中添加 `visible: bool` 字段
- [ ] 1.2 在 `ModelRuntime` 中添加 `set_bone_visibility` 方法
- [ ] 1.3 在 `ModelRuntime` 中添加 `get_bone_visibility` 方法
- [ ] 1.4 在 JNI `model_handle.rs` 中暴露可见性设置接口
- [ ] 1.5 编写单元测试验证可见性功能
- [ ] 1.6 运行 `cargo test` 确保通过

## 2. Java 代码实现

- [ ] 2.1 在 `MMDModel` 类中添加 `setBoneVisibility` native 方法声明
- [ ] 2.2 在 `BoneRenderer` 中实现骨骼调试渲染
- [ ] 2.3 添加骨骼可见性检查逻辑
- [ ] 2.4 创建 `DebugControls` UI 组件
- [ ] 2.5 添加可见性切换按钮和处理逻辑
- [ ] 2.6 编写 Java 单元测试
- [ ] 2.7 运行 Gradle 测试

## 3. 用户界面

- [ ] 3.1 设计骨骼可见性控制面板
- [ ] 3.2 实现"应用到所有骨骼"功能
- [ ] 3.3 实现"重置"功能
- [ ] 3.4 添加键盘快捷键（可选）

## 4. 测试与验证

- [ ] 4.1 测试单个骨骼可见性切换
- [ ] 4.2 测试批量骨骼可见性设置
- [ ] 4.3 在实际 Minecraft 客户端测试
- [ ] 4.4 验证不影响模型正常渲染
- [ ] 4.5 性能测试（关闭和开启状态）
- [ ] 4.6 测试 Fabric 和 Forge 兼容性

## 5. 文档更新

- [ ] 5.1 更新用户手册说明新功能
- [ ] 5.2 添加代码注释
- [ ] 5.3 更新 CHANGELOG.md

## 注意事项

### 性能检查点
- [ ] 骨骼渲染关闭时无性能影响?
- [ ] 骨骼渲染开启时额外开销 < 1ms?
- [ ] JNI 调用是否批量处理?

### 跨平台兼容性
- [ ] Fabric 加载器正常?
- [ ] Forge 加载器正常?
